## 热点

![热点](../../media/editor/plugin/plugin.png)

点击顶部【热点】按钮，打开热点插件系统为场景布置提供丰富热点交互功能，可以在展厅任意位置添加热点。
热点插件提供多种交互方式：弹出文本，打开链接，播放音频，材质颜色变换，视频流材质(直播视频)，调用接口显示数据，自定义按钮，模型隐藏显示，路径规划等。

### 热点列表
显示已经添加的热点列表，可以根据热点名称搜索已经添加的热点。
- 编辑：选中列表中的热点，打开编辑面板。
- 查看：点击列表中[眼睛]图标，查看当前热点位置。
- 删除；点击列表中[垃圾桶]图标，删除当前热点。

### 触发类型

触发类型指的是触发交互的方式，water3d提供三种类型：图片，模型，距离

#### 图片

选择系统图片或者上传贴图（[参考自定义热点](./plugin.md#自定义热点)）作为热点，在漫游时点击图片触发交互。
![热点](../../media/editor/plugin/plugin1.png)

**热点图片属性设置：设置热点图片大小、旋转、颜色、帧数和帧速（*如果是自定义热点上传的序列帧文件可以设置帧数和帧速*）。**
**显示标题：勾选后开启**
- 浮动标题：勾选开启。
- 标题偏移：设置标题向上偏移距离。
- 可是距离：可是可以看见当前热点标题的距离。
- 缩放大小：设置标题文章大小。
- 线条长度：设置浮动标题线条长度。
- 显示折线：勾选开启。

| ![热点](../../media/editor/plugin/plugin1-1.png) | ![热点](../../media/editor/plugin/plugin1-2.png) | ![热点](../../media/editor/plugin/plugin1-3.png) |
| :-----------: | :-----------: | :-----------: |
| 显示标题       | 浮动标题       | 显示折线      |

#### 模型

选择模型作为热点，默认点击选中模型触发交互，还可以勾选碰撞触发，移入触发，自动恢复。

![热点](../../media/editor/plugin/plugin2.png)

#### 距离

设置触发热点范围，可设置位置、距离(半径)。点击开始按钮，然后在展厅中点击地面设置中心点位置。漫游时移动到设置范围内时触发交互。还可以勾选离开关闭，自动漫游也触发。

![热点](../../media/editor/plugin/plugin3.png)

### 自定义热点

当使用图片类型触发时，可以启用上传图片，上传自定义的热点图片。

__上传热点文件有以下要求：__
1. 图片必须是png格式。
2. 如果要上传动态热点图还需注意:
    - 文件命名必须是xxx_gif.png （其中xxx内容自己定义）。
    - 热点图片是从上往下排列的10张序列帧合并的图片。
    - 文件名称以new_ 开头，比如：new_xxx_gif.png（其中xxx自定义）。那么热点图片是从上往下排列的25张序列帧合并而成的图片。
    - 热点图高度不能超过2048像素。
3. 如果上传AE动画要注意：AE导出json并将文件名称命名为xxx_lt.json，对应封面为xxx_lt.png。参考：[如何在AE中导出json文件](../../notice/notice.md#如何在ae中导出json文件)。
    
    - 推荐一个可以下载json的网站: <https://lottiefiles.com/popular>

    点击一个动画，复制链接，如下图：

    ![热点](../../media/editor/plugin/plugin16.png)

    复制链接后，在浏览器中打开，按ctrl+s保存即可

### 多媒体

#### 弹出文本内容
触发热点弹出文本，支持富文本内容弹出。_输入文本即可_

#### 打开链接
触发热点打开第三方链接，

![热点](../../media/editor/plugin/plugin6.png)

- 名称：热点名称
- url：热点触发打开的链接。
- 点击统计：勾选后，点击触发当前热点时，会将点击次数统计到访问数据中。
- 显示按钮：会在页面工具栏显示按钮。可以设置按钮名称，也可以上传自定义图标(默认显示内置图片)。
- 隐藏热点：勾选后不显示热点。

- 新窗口：勾选后，在浏览器新窗口中打开链接。默认弹窗打开链接。
- 直接跳转：勾选后会直接在当前窗口打开链接(会刷掉当前展厅链接)。
- 大窗口：弹窗打开，弹窗为较大窗口。
- 不旋转：弹窗打开链接时不会自动横屏。
- 全屏：以弹窗形式全屏打开链接。
- 背景颜色：弹窗打开时，窗口背景颜色。
- 透明背景：弹窗打开时，背景透明。
- 模拟手机：模拟手机UI展示。
- 监听关闭事件：弹窗打开时，等待子窗口发送close-window的事件然后关闭弹窗。
- 记录位置：记录当前位置，回退链接的时候会回到该位置。

__需要注意一下几点：__
1. 以弹窗方式打开的时候需要第三方链接支持iframe嵌套。
2. 以弹窗模式打开时要使用https的链接，否则会受跨域影响。

#### 打开素材
触发热点打开素材库中上传的素材。设置和打开链接基本相同。

![热点](../../media/editor/plugin/plugin7.png)

使用此插件需要先上传素材，选中需要展示的素材即可。

#### 播放音频
触发热点播放音频。例如：语音解说讲解之类。

![热点](../../media/editor/plugin/plugin8.png)

1. 上传音频文件。
2. 自动播放，循环播放。
3. 显示按钮：会在页面工具栏显示喇叭按钮，可以点击控制音频播放/暂停。可设置按钮名称。
4. 隐藏热点：勾选后不显示热点。

#### 联系电话
点击直接拨打电话

![热点](../../media/editor/plugin/plugin9.png)

1. 显示按钮：会在页面工具栏显示电话按钮。也可以上传自定义图标(默认显示电话ICON)。
2. 隐藏热点：默认隐藏热点，不使用热点触发，直接点击按钮即可。不隐藏时可以在展厅中任意位置添加热点，触发热点拨打电话。
3. 右下角显示：默认显示在底部中间，勾选后显示在右下角。

#### 弹出二维码
通过热点按钮弹窗显示二维码，需要上传二维码图片，其他设置和【联系电话】相似。

<!-- ![热点](../../media/editor/plugin/plugin9-1.png) -->

#### 文件下载
通过热点实现文件下载，需上传想让用户下载的文件。其他设置和【联系电话】相似

<!-- ![热点](../../media/editor/plugin/plugin9-2.png) -->

#### 智能问答
通过点击热点按钮打开对应的智能问答地址。需要填写智能问答地址，显示的按钮在右下角(按钮图片默认为系统logo)，其他设置和【联系电话】相似。

### 材质

__添加此类热点时需要先选中目标材质。__

#### 共享屏幕
投屏到指定材质上。
1. 投屏位置：选择需要投屏的材质。
2. 设置热点触发类型。

#### 修改贴图
添加贴图选项，触发热点时根据贴图选项修改贴图。

![热点](../../media/editor/plugin/plugin10.png)
1. 修改贴图：选择需要修改贴图的材质。
2. 贴图选项：选择材质，添加到贴图选项列表中。
3. 贴图选项列表：对贴图选项进行排序，删除操作。

#### 漫反射变色
给选中场景模型的材质提供自动切换或手动切换材质颜色功能，实现颜色闪动特效。

![热点](../../media/editor/plugin/plugin11.png)

1. 要选中纯色材质。
2. 速度：设置时间调整颜色变换速度。
3. 自动开始：勾选时，展厅加载完成后自动触发换色，不显示热点图标。不勾选，将使用系统提供的三种触发方式。
4. 设置颜色：颜色变化顺序将按颜色添加的顺序显示。

#### 自发光渐变
通过热点触发材质自发光渐变。
1. 自动开始：勾选自动开始，展厅加载完成后自动渐变。不勾选将使用系统提供的三种触发方式。默认勾选。
2. 设置渐变：步长、最大值、最小值

_建议: 纯色材质_

#### 自发光
通过热点触发材质自发光。
1. 选择材质，设置自发光强度。
2. 隐藏热点：默认勾选，去掉勾选后可以选择需要触发方式。

#### 直播流
视频流材质。材质使用直播视频流数据显示。

1. 选中要显示视频流的材质。
2. 填写视频流地址。如：http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8。
3. 自动播放：勾选时展厅加载完成自动加载视频流数据显示。不勾选时，添加热点触发加载。

#### 序列帧贴图
通过热点方式播放序列帧图片。如物体环视图。
1. 图片压缩包：上传序列帧图片zip包。__zip包不能包含文件夹, 图片文件是png, 命名为：0.png,1.png,2.png..., 注意: 文件名称是小写的.png__
2. 图片数量：zip包中包含的png图片数量。
3. 播放速度：序列帧播放顺序。
4. 选择材质, 选择模型：选择需要使用序列帧贴图的模型和材质。

#### 透明度渐变
透明材质透明度渐变设置。
1. 自动开始：勾选后自动触发热点。
2. 重复执行：默认勾选重复执行。
3. 隐藏热点：默认勾选隐藏热点，不显示热点。去掉勾选后，可设置热点图片等触发方式。
4. 渐变设置
    - 步长
    - 最小值
    - 最大值

#### 上传材质贴图
用户在漫游时，通过此热点上传贴图替换当前材质
1. 宽度，高度：设置宽高，用户在上传材质贴图时会出现裁剪框，裁剪框将默认按此宽高比例裁剪上传文件。
2. 材质：选择要替换的材质。
3. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
4. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式。

#### 材质消融
用户在漫游时，通过此热点可以让选择的材质实现显示隐藏的效果
1. 在【材质】面板中选中需要消融动画的材质，__注意：要选择场景中有贴图的材质，不能是纯色的材质。并勾选消融，设置消融参数__。
2. 选择材质：上一步的材质。
3. 渐出：
    - 勾选时：材质本来可见，通过消融动画逐渐隐藏。
    - 不勾选时：材质本来隐藏，通过消融动画逐渐显示。
4. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式。 

#### 一对一替换材质
选择场景中的材质进行一对一替换。
1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式。
3. 修改材质：选择目标材质。
4. 源材质：选择作为替换源的材质。

#### 切换天空盒贴图
使用此插件前，需要在【烘培】->【天空盒】中选择或上传多个天空盒贴图。热点使用方式和前面基本相同。

### 界面

#### 自定义按钮
在页面工具栏显示按钮，按钮点击打开链接，弹窗模式打开需要链接支持iframe嵌套。
1. 自定义名称
2. 自定义图标, 上传图片
3. 弹窗模式：勾选时以弹窗形式打开链接，不勾选将在新窗口中打开链接。

#### 弹出图片

![热点](../../media/editor/plugin/plugin12.png)

1. 上传图片或填写图片链接
2. 跳转链接：填写点击图片跳转的地址。
3. 弹出图片位置设置
    - 水平对齐：左对齐，剧中对齐，右对齐。
    - 设置水平距离：左间距和右间距。
    - 垂直对齐：顶部对齐，剧中对齐，底部对齐。
    - 设置垂直距离：上间距和下间距。
4. 弹出图片大小设置：设置宽度和高度。

#### 展厅列表导航
在页面上添加导览列表
- 上传导览图标
- 添加展厅列表
 - 导航名称
 - 场景视角：勾选后可以直接选择当前展厅视角。
 - 导航链接：不勾选场景视角，则需要填写导航要去的链接地址。
 - 新窗口：勾选后，在新窗口中打开链接，不勾选，将在当前窗口中打开链接。
 - 导航父级：支持二级导航。

![热点](../../media/editor/plugin/plugin18.png)

### 模型

#### 隐藏显示模型
触发模型显示隐藏的热点。

![热点](../../media/editor/plugin/plugin14.png)
1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 选择要切换的模型：选择一个或多个需要切换隐藏显示的模型，选中后会添加到列表中。
3. 已选模型列表：可以对已选模型进行排序，删除等操作。
4. 开始全部隐藏：勾选后，触发热点开始时选中的模型全部隐藏。
5. 最后全部隐藏：勾选后，触发热点切换完成后，选中的模型全部隐藏。
6. 一个个隐藏：勾选后，触发热点时已选模型按顺序逐个隐藏。
7. 只触发一次：勾选后，触发一次后插件会自动卸载。

#### 通过密码隐藏显示模型
通过输入密码，将选择的模型隐藏。在闯关或者密码房间等场景中有帮助。
- 选择模型：点击【选择】选中需要隐藏的模型。

#### 路径规划
给场景中的模型设置巡游动画，机器人就可以在场景中自动漫游。

1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 可以在场景【布展】中放入机器人等模型.
3. 选择模型：选中选中机器人模型。
4. 速度：设置巡游速度。
5. 重复执行：勾选后，模型会按照路径重复巡游。默认勾选。
6. 自动开始：勾选后，场景加载完成后自动开始巡游。
7. 自动转向：勾选后，巡游路劲转弯时，模型朝向自动根据路径旋转。默认勾选。
    - 角度修正：可以设置需要修正的角度，默认0。
8. 设置路径：点击[开始]按钮后，点击场景地面位置添加巡游点位。点位会添加到列表中。
9. 位置列表：显示已经添加的巡游点位，可以编辑点位坐标，排序，删除等操作。
10. 相机跟随：勾选后，模型在巡游时相机跟随模型一起漫游。
    - 跟随高度：设置相机跟随时到模型的高度。
    - 跟随距离：设置相机跟随时到模型的距离
11. 隐藏热点：勾选时不显示热点，默认勾选。

![热点](../../media/editor/plugin/plugin4.png)

#### 拖拽旋转
应广大客户单体模型展示需求，特别新增了此插件，添加此热点后可以在场景中通过拖拽旋转展示单个物体。

添加此热点只需要选中需要操作的目标物体即可。

#### 模型缩放
设置场景中的某个模型进行放大，缩小的重复动画。

1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选隐藏热点，不显示热点。去掉勾选后，可设置热点图片等触发方式。
3. 自动开始：勾选后，场景加载完成时自动触发。
4. 选择模型：选择需要进行缩放的模型。
    - 速度：缩放变换速度
    - 最小缩放值
    - 最大缩放值

#### 触发骨骼动画
场景中拖入骨骼动画模型，需要触发播放动画时，需要此插件。
1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选隐藏热点，不显示热点。去掉勾选后，可设置热点图片等触发方式。
3. 自动开始：勾选后，场景加载完成时自动触发。
4. 选择模型：选择骨骼动画模型。
    - 选择动画：骨骼动画模型动画。
    - 动画速度：设置动画速度。
    - 动画循环：设置是否循环播放动画。默认不勾选。

#### 区块控制
使用此插件需要先在【加载分块】中添加分块。
- 选择区块：选择需要使用热点控制的分块。
- 离开区域隐藏：关闭的时候隐藏该热点。

### 其他

#### 视角切换
如果需要在场景中添加热点，点击后跳转到指定位置，可以使用此热点。
比如：可以在不同楼层设置视角，然后添加此热点，点击热点跳转到不同楼层对应的视角。

1. 切换的视角：需要先添加视角，选择切换的视角。选中的视角会在切换的视角列表中。
2. 视角列表：显示已选中的视角，点击删除按将视角从已选视角中移除。
3. 不移动相机：勾选后，点击热点时，不会跳转到对应视角。默认不勾选。

![热点](../../media/editor/plugin/plugin15.png)

#### 打开全景图
打开上传的全景图片或全景漫游链接地址。
- 上传全景图片
- 退出全景按钮：右上角会显示【退出全局】按钮。
- 旋转角度：全景旋转角度。
- 全景漫游地址：输入全景漫游地址，输入地址后，触发热点时会自动全屏显示全景漫游。
- 监听关闭事件：等待子窗口发送close-window的事件然后关闭弹窗。

#### 分享当前相机位
通过热点分享当前视角，生成二维码链接。

1. 直接进入：勾选时，打开分享的二维码或链接后直接进入到分享时的视角。不勾选进入展厅默认初始视角。默认勾选。
2. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
3. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式。

#### 加入会议
通过热点加入到视频会议。

1. 自动开始：展厅加载完成时自动进入会议。
2. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
3. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式进入会议。

#### 触发多个热点
如果需要同时触发多个热点，可以使用此插件。

1. 选择热点：选择需要同时触发的热点，选中后的热点在热点列表中显示。
2. 热点列表：可以对已选择的热点进行排序，删除操作。
2. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
3. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式进入会议。

#### 触发动画
通过热点触发编辑的动画。

1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式打开。
3. 自动开始：勾选后，场景加载完成时自动触发。
4. 选择动画：在下拉列表中选择制作好的动画。

#### 顺序触发热点
按顺序触发多个热点
1. 选择热点
2. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
3. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式打开。

#### 触发粒子系统
通过热点触发布置在场景中的粒子系统
1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式打开。
3. 自动开始：勾选后，场景加载完成时自动触发。
4. 选择粒子：选择要触发的粒子，选择的粒子为布展时添加的粒子。

#### 打开电商小程序
通过热点打开Cremb电商小程序，需设置：
- 电商部署地址
- 路径
- 查询参数

#### 打开留言板
通过热点触发弹窗打开留言板

#### 发送事件
通过热点触发发送js事件
- 事件代码：比如close-window 关闭窗口。

#### 自动寻路
通过热点触发显示或隐藏到达到目标视角的指示线路，但是不会移动相机。需要选择添加目标视角（可以添加多个视角）。
__指示线路根据碰撞地图计算生成。__ [线路样式请查看自动寻路设置](../hongpei/global.md#显示线路)
![热点](../../media/editor/plugin/plugin20.png)

#### 相机轨道
通过热点控制相机在设置的轨道上巡游。
![热点](../../media/editor/plugin/plugin19.png)

- 自动开始：勾选后，展厅加载完成时，自动巡游。
- 速度：巡游时相机移动的速度。
- 固定朝向：勾选后，相机会一直对着朝向坐标的方向。
- 区间朝向：可以设置多个区间（目前最多三个区间），然后再对应的区间设置朝向。
    - 区间：这区间数值是添加的巡游点的序号，可以设置在此区间内的相机朝向。比如：区间一 开始：1 结束：5，表示设置序号1-5这些巡游点范围内的朝向相机。
    - 朝向：点击【开始】按钮后点击地面位置获取坐标点，可以单独设置朝向坐标值。
- 设置路径：添加多个巡游点，形成一个路径。
    - 添加巡游点：点击【开始】按钮后点击地面位置添加巡游点，点击【结束】按钮完成巡游点的添加。
    - 巡游点列表：显示已经添加的巡游点，可以调整巡游点顺序，编辑或删除某个巡游点，巡游点序号即列表排列顺序号。
    - 巡游点坐标编辑：巡游点坐标对应的相机巡游移动是的位置。
        - 点击编辑按钮，手动编辑坐标值。
        - 点击界面中的巡游点，使用鼠标按照三维坐标系调整巡游点坐标位置。

#### 显示隐藏通道门
通过此热点可以实现显示或隐藏通过布展拖拽到场景中的传送门模型, __需要先在场景中拖入传送门，参考[传送门](../buzhan/buzhan.md#传送门)__。
- 选择模型：选择传送门模型（布展时拖拽到展厅中的传送门）。
- 朝向相机：调整朝向相机。
- 镜子大小：传送门镜子模型的大小设置。
- 序号矫正：调整默认正对门的序号，边框会有辉光效果。
- 偏移：调整传送门前后偏移量。
- fov矫正：通过调整fov与偏移，可以显示多个传送门。

#### 启动导览
通过热点的方式，启动自动漫游播放。
- 弹窗确认：勾选后，触发热点时，会弹出确认框，确认框可以自定义设置：
    - 弹框背景图
    - 确认图片：上传此图当作确认按钮。
    - 取消图片：上传此图当作取消按钮。
    - 播报语音：上传音频文件，弹窗时会自动播放。
    - 弹窗宽度
    - 确认按钮名称：如果没有上传此按钮图片，可以输入名称。
    - 取消按钮名称：如果没有上传此按钮图片，可以输入名称。

#### 语言切换
通过热点的方式切换中英文UI界面。
- 弹窗确认：勾选后，触发热点时，会弹出确认框，确认框可以自定义设置和【启动导览】热点设置基本相同。

#### 热点加减迭代器
通过此插件可以对序列帧贴图进行控制。
1. 先添加【序列帧贴图】热点
2. 再添加此热点，选择插件中可以添加序列贴图热点插件。


### 第三人称

#### 进入会议
控制人物模型，播放人物模型动画，移动到指定位置触发加入会议。

1. 显示按钮：默认勾选，按钮将显示在工具栏中，可设置按钮名称，上传按钮图标。
2. 隐藏热点：默认勾选，不显示热点。去掉勾选后，可设置热点图片等触发方式打开。
3. 自动开始：展厅加载完成时自动触发热点，默认不勾选。
4. 坐标：点击[开始]按钮在场景中设置位置，点击这个位置时人物模型移动到坐标位置时加入会议。
5. 旋转：人物模型旋转角度。
6. 绑定第三人称：绑定虚拟人物，实现指定某些虚拟人物才触发；如果未绑定，则默认都能触发。
6. 选择动画：选择人物模型动画，人物模型到达指定位置时执行动画。
7. 循环动画：循环播放人物模型动画，默认不勾选。
8. 加入会议：动作完成后自动进入会议。默认勾选。
9. 安全区：设置安全区半径，离开此区域，退出会议，进入此区域时自动执行动画，进入会议。

#### 第三人称共享屏幕

控制人物模型，在共享屏幕时播放指定的模型动画。
- 自动开始
- 投屏位置：选择投屏的材质。
- 坐标：点击[开始]按钮在场景中设置位置，点击这个位置时人物模型移动到坐标位置播放动画。
- 选择动画：选择人物模型动画，人物模型到达指定位置时执行的动画。
- 循环播放